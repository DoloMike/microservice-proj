<app-modal title="Loan: {{loanId | uppercase}}">
    <div class="row">
        <div class="col">
            <div
                class="btn-group"
                role="group"
                aria-label="Basic example"
            >
                <button
                    type="button"
                    class="btn btn-primary"
                    (click)="toggleEdit()"
                    [disabled]="canEdit"
                    [hidden]="canEdit"
                >
                    Edit
                </button>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <label for="customerDropDown">Borrower:</label>
            <div class="input-group mb-3">
                <div
                    ngbDropdown
                    class="d-inline-block"
                >
                    <button
                        class="btn btn-outline-primary"
                        id="customerDropDown"
                        ngbDropdownToggle
                        [disabled]="!canEdit"
                    >
                        {{selectedCustomerName}}
                    </button>
                    <div
                        ngbDropdownMenu
                        aria-labelledby="customerDropDown"
                    >
                        <input
                            type="text"
                            class="form-control"
                            placeholder="Search..."
                            (click)="$event.stopPropagation()"
                            (keyup)="filterCustomers($event)"
                        >
                        {{values}}
                        <button
                            *ngFor="let fc of filteredCustomers"
                            class="dropdown-item"
                            (click)="selectCustomer(fc._id)"
                        >
                            {{fc.first + ' ' + fc.last}}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <label for="rate">Balance:</label>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">$</span>
                </div>
                <input
                    type="number"
                    class="form-control"
                    id="balance"
                    placeholder="Balance"
                    aria-label="Amount (to the nearest dollar)"
                    [disabled]="!canEdit"
                    [(ngModel)]="loan.balance"
                >
            </div>
        </div>
        <div class="col">
            <label for="rate">Interest Rate:</label>
            <div class="input-group mb-3">
                <input
                    type="number"
                    class="form-control"
                    id="rate"
                    placeholder="Interest Rate"
                    aria-label="Amount (to the nearest dollar)"
                    [disabled]="!canEdit"
                    [(ngModel)]="loan.rate"
                >
                <div class="input-group-append">
                    <span class="input-group-text">%</span>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <label for="loanAmount">Loan Amount:</label>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">$</span>
                </div>
                <input
                    type="number"
                    class="form-control"
                    id="loanAmount"
                    placeholder="Loan Amount"
                    aria-label="Amount (to the nearest dollar)"
                    [disabled]="!canEdit"
                    [(ngModel)]="loan.amount"
                >
                <div class="input-group-append">
                    <span class="input-group-text">.00</span>
                </div>
            </div>
        </div>
        <div class="col">
            <label for="loanTerm">Term:</label>
            <div class="input-group mb-3">
                <input
                    type="number"
                    class="form-control"
                    id="loanTerm"
                    placeholder="Term"
                    aria-label="Amount (to the nearest dollar)"
                    [disabled]="!canEdit"
                    [(ngModel)]="loan.term"
                >
                <div class="input-group-append">
                    <span class="input-group-text">Months</span>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <div class="form-group">
                <label for="orginationDate">Orgination Date:</label>
                <div class="input-group">
                    <input
                        id="orginationDate"
                        class="form-control"
                        placeholder="yyyy-mm-dd"
                        name="dp"
                        [(ngModel)]="loan.orginationDateObj"
                        ngbDatepicker
                        #d1="ngbDatepicker"
                        [disabled]="!canEdit"
                    >
                    <div class="input-group-append">
                        <button
                            class="btn btn-outline-secondary calendar"
                            (click)="d1.toggle()"
                            type="button"
                            [disabled]="!canEdit"
                        ></button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="form-group">
                <label for="orginationDate">Maturity Date:</label>
                <div class="input-group">
                    <input
                        id="maturityDate"
                        class="form-control"
                        placeholder="yyyy-mm-dd"
                        name="dp"
                        [(ngModel)]="loan.maturityDateObj"
                        ngbDatepicker
                        #d2="ngbDatepicker"
                        [disabled]="!canEdit"
                    >
                    <div class="input-group-append">
                        <button
                            class="btn btn-outline-secondary calendar"
                            (click)="d2.toggle()"
                            type="button"
                            [disabled]="!canEdit"
                        ></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <div class="form-group">
                <label for="purpose">Loan Purpose</label>
                <textarea
                    id="purpose"
                    class="form-control"
                    aria-label="Loan Purpose"
                    placeholder="purpose..."
                    [disabled]="!canEdit"
                    [(ngModel)]="loan.purpose"
                ></textarea>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-9">
            <div
                class="btn-group"
                role="group"
                aria-label="Basic example"
            >

                <button
                    type="button"
                    class="btn btn-success"
                    (click)="submit()"
                    [disabled]="!canEdit"
                    [hidden]="!canEdit"
                >
                    Submit
                </button>
            </div>
        </div>
        <div class="col-3">
            <div
                class="btn-group"
                role="group"
                aria-label="Basic example"
            >

                <button
                    type="button"
                    class="btn btn-danger"
                    (click)="delete()"
                    [disabled]="!canEdit"
                    [hidden]="!canEdit || isNewSubmission"
                >
                    Delete
                </button>
            </div>
        </div>
    </div>
</app-modal>
